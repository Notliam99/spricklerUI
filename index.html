<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>ðŸ’¦</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Water</title>
    <script type="module">
const l=`<div id='navBar'>
  <nav>
    <ul>
      <li id='title'>
        <h1>Water ðŸ’¦</h1>
      </li>
      
      <li>
        <a href="./">
          <h1>Home</h1>
        </a>
      </li>
      
      <li>
        <a href="./stats">
          <h1>Stats</h1>
        </a>
      </li>
    </ul>
  </nav>
</div>
`,d=`<div id="manual-control">
  <div class="button">
    <button id="button-0">
      <h1>1</h1>
    </button>
  </div>
  
  <div class="button">
    <button id="button-1">
      <h1>2</h1>
    </button>
  </div>
  
  <div class="button">
    <button id="button-2">
      <h1>3</h1>
    </button>
  </div>
  
  <div class="button">
    <button id="button-3">
      <h1>4</h1>
    </button>
  </div>
</div>
`,f={header:{navBar:l},main:{"/":d}};function h(){var t=[document.getElementById("button-0"),document.getElementById("button-1"),document.getElementById("button-2"),document.getElementById("button-3")];return t}async function s(t){console.log(t);try{const e=await fetch("/sprinckler/status?id=all",{method:"GET",headers:new Headers({"content-type":"application/json"})});if(!e.ok)throw new Error(`HTTP error, status = ${e.status}`);if(await e.headers.get("content-type")!="application/json")throw new Error(`content-type Error expected "application/json", status = ${e.headers.get("content-type")}`);var n=await e.json()}catch(e){console.warn(e);return}for(let e=0;e<Object.keys(n).length;e++){var c=n[Object.keys(n)[e]];c.status?t[e].style.backgroundColor="green":t[e].style.backgroundColor="red"}}async function a(t){try{const n=await fetch(`/sprinckler/toggle?id=${t}`,{method:"POST"});if(!n.ok)throw new Error(`HTTP error, status = ${n.status}`)}catch(n){console.warn(n)}}async function b(t){a("0"),await s(t.currentTarget.buttons),console.log("button_0 click",t)}async function p(t){a("1"),await s(Array(t.currentTarget.buttons)),console.log("button_1 click",t)}async function g(t){a("2"),await s(t.currentTarget.buttons),console.log("button_2 click",t)}async function m(t){a("3"),await s(t.currentTarget.buttons),console.log("button_3 click",t)}const u=[b,p,g,m];function y(){let t=h();s(t);try{if(t.length!=u.length)throw new Error(`Length of ${u.length<t.length?"button_funcs is less than the amount of buttons":"amount of parsed buttons is less than amount of button functions"}`);for(let n=0;n<t.length;n++){const c=t[n],e=u[n];c.addEventListener("click",e),c.buttons=t}}catch(n){console.error(n)}}function w(){y()}function v(t){let n="";for(let o=0;o<Object.keys(t.header).length;o++)n+=t.header[Object.keys(t.header)[o]];let c="";try{if(typeof t.main[location.pathname]>"u")throw"path not found";c=t.main[location.pathname]}catch(o){console.warn(o),location.pathname="/"}return{header:n,main:c,footer:""}}document.addEventListener("DOMContentLoaded",()=>{let t=v(f);console.log(Object.keys(t));for(let n=0;n<Object.keys(t).length;n++){const c=document.createElement(Object.keys(t)[n]);c.innerHTML=t[Object.keys(t)[n]],document.querySelector("#app").append(c)}w()});

</script>
    <style>
:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;height:100%}*{margin:0;box-sizing:border-box}#navBar{height:6rem;padding:.5rem}#navBar>nav{height:100%}#navBar ul{height:100%;list-style-type:none;border:.2rem solid black;border-radius:2rem;padding:0}#navBar li{display:flex;justify-content:center;align-items:center;border:.2rem solid black;border-radius:2rem;text-decoration:None;float:right;height:calc(100% - .8rem);margin:.4rem;padding:.3rem;--list-padding: .5rem}#navBar a{display:flex;align-items:center;justify-content:center;height:100%;width:100%;color:inherit;text-decoration:none}#navBar a>h1{padding:var(--list-padding)}#navBar a:hover{text-shadow:1px 1px 2px red,0 0 1em blue,0 0 .2em blue}#navBar #title{float:left;border-width:0;width:auto}#manual-control{display:flex;flex-direction:row;height:20rem;width:100%}#manual-control .button{height:100%;width:100%;padding:.5rem}#manual-control button{height:100%;width:100%;border:.2rem solid black;border-radius:2rem}#manual-control button:hover{text-shadow:1px 1px 2px red,0 0 1em blue,0 0 .2em blue}

</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
